<!DOCTYPE html>
<html>
<head>
  <title>language.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "src/language.coffee";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0" /></head>
<body>
  <nav>
<div class="logo"><a href="http://alinex.github.io"
  onmouseover="logo.src='https://alinex.github.io/images/Alinex-200.png'"
  onmouseout="logo.src='https://alinex.github.io/images/Alinex-black-200.png'">
  <img name="logo" src="https://alinex.github.io/images/Alinex-black-200.png"
    width="150" title="Alinex Universe Homepage" />
  </a>
  <img src="http://alinex.github.io/images/Alinex-200.png"
    style="display:none" alt="preloading" />
</div>
<div class="links">
  <a href="http://alinex.github.io/blog"
    class="btn btn-primary"><span class="glyphicon-pencil"></span> Blog</a>
  <a href="http://alinex.github.io/develop"
    class="btn btn-primary"><span class="glyphicon-book"></span> Develop</a>
  <a href="http://alinex.github.io/code.html"
    class="btn btn-warning"><span class="glyphicon-cog"></span> Code</a>
</div>
</nav><div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#startup-script">Startup script</a>
      </div>

      <div class="heading h2">
        <a href="#node-modules">Node Modules</a>
      </div>

      <div class="heading h2">
        <a href="#detection">Detection</a>
      </div>

      <div class="heading h2">
        <a href="#language-definition">Language definition</a>
      </div>

      <div class="heading h1">
        <a href="#languages">Languages</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container" tabindex="0"><a id="fork" href="https://github.com/alinex/node-codedoc" title="Fork me on GitHub"></a>
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="startup-script">
  <h1>
    <a href="#startup-script" name="startup-script" class="pilcrow"></a>
Startup script
  </h1>
</div>

        </td>
        <td class="code highlight">
          
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="node-modules">
  <h2>
    <a href="#node-modules" name="node-modules" class="pilcrow"></a>
Node Modules
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">path = <span class="hljs-built_in">require</span> <span class="hljs-string">'path'</span>


shebangRegex = <span class="hljs-regexp">///
  ^                     <span class="hljs-comment"># start of contents</span>
  \<span class="hljs-comment">#!                   # this have to be the first two bytes</span>
  \s*(?:/usr/bin/env)?  <span class="hljs-comment"># the call to search executable in path</span>
  \s*(?:[^\n]*/)*       <span class="hljs-comment"># any path before the executable</span>
  ([^/\n]+)             <span class="hljs-comment"># the executable</span>
  (?:\n|$)              <span class="hljs-comment"># end of line</span>
  ///</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="detection">
  <h2>
    <a href="#detection" name="detection" class="pilcrow"></a>
Detection
  </h2>
</div>
<p>Provides language-specific params for a given file name.</p>
<p>@param {string} filename The name of the file to test
@param {string} contents The contents of the file (to check for shebang)
@return {object} Object containing all of the language-specific params</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">(file, contents)</span> -&gt;</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>First try to detect the language from the file extension</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  ext = path.extname(file)[<span class="hljs-number">1.</span>.]
  <span class="hljs-keyword">return</span> languages.cpp <span class="hljs-keyword">if</span> ext <span class="hljs-keyword">is</span> <span class="hljs-string">'C'</span> <span class="hljs-comment"># hacky of incorporating .C for C++</span>
  ext = ext.toLowerCase()
  base = path.basename(file).toLowerCase()</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>search for match</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  <span class="hljs-keyword">for</span> _, l <span class="hljs-keyword">of</span> languages
    <span class="hljs-keyword">return</span> l <span class="hljs-keyword">if</span> l.extensions? <span class="hljs-keyword">and</span> ext <span class="hljs-keyword">in</span> l.extensions
    <span class="hljs-keyword">return</span> l <span class="hljs-keyword">if</span> l.names? <span class="hljs-keyword">and</span> base <span class="hljs-keyword">in</span> l.names</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>If that doesn't work, see if we can grab a shebang</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  match = shebangRegex.exec(contents)
  <span class="hljs-keyword">if</span> match
    <span class="hljs-keyword">for</span> _, l <span class="hljs-keyword">of</span> languages
      <span class="hljs-keyword">return</span> l <span class="hljs-keyword">if</span> l.executables? <span class="hljs-keyword">and</span> match[<span class="hljs-number">1</span>] <span class="hljs-keyword">in</span> l.executables</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>If we still can't figure it out, give up and return null.</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  <span class="hljs-literal">null</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="language-definition">
  <h2>
    <a href="#language-definition" name="language-definition" class="pilcrow"></a>
Language definition
  </h2>
</div>

        </td>
        <td class="code highlight">
          
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="languages">
  <h1>
    <a href="#languages" name="languages" class="pilcrow"></a>
Languages
  </h1>
</div>
<p>All the languages Docker can parse are in here.
A language can have the following properties:</p>
<ul>
<li><code>extensions</code>: All possible file extensions for the language</li>
<li><code>executables</code>: Executables for the language that might be in a shebang</li>
<li><code>comment</code>: Delimiter for single-line comments</li>
<li><code>multiLine</code>: Start and end delimiters for multi-line comments</li>
<li><code>commentsIgnore</code>: Regex for comments that shouldn't be interpreted as descriptive</li>
<li><code>jsDoc</code>: whether to try and extract jsDoc-style comment data</li>
<li><code>literals</code>: Quoted strings are ignored when looking for comment delimiters. Any extra literals go here</li>
<li><code>highlightLanguage</code>: override for language to use with highlight.js</li>
</ul>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">languages =
  javascript:
    extensions: [ <span class="hljs-string">'js'</span> ]
    executables: [ <span class="hljs-string">'node'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    commentsIgnore: <span class="hljs-regexp">/^\s*\/\/=/</span>
    jsDoc: <span class="hljs-literal">true</span>
    literals: [ [
      <span class="hljs-regexp">/\/(?![\*\/])((?:[^\\\/]|(?:\\\\)*?\\[^\\])*?)\//g</span>
      <span class="hljs-string">'/./'</span>
    ] ]
  coffeescript:
    extensions: [ <span class="hljs-string">'coffee'</span> ]
    names: [ <span class="hljs-string">'cakefile'</span> ]
    executables: [ <span class="hljs-string">'coffee'</span> ]
    comment: <span class="hljs-string">'#'</span>
    multiLine: [
      <span class="hljs-regexp">/^\s*#{3}\s*$/m</span>
      <span class="hljs-regexp">/^\s*#{3}\s*$/m</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
    literals: [ [
      <span class="hljs-regexp">/\/(?![\*\/])((?:[^\\\/]|(?:\\\\)*?\\[^\\])*?)\//g</span>
      <span class="hljs-string">'/./'</span>
    ] ]
  livescript:
    extensions: [ <span class="hljs-string">'ls'</span> ]
    executables: [ <span class="hljs-string">'lsc'</span> ]
    comment: <span class="hljs-string">'#'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  ruby:
    extensions: [
      <span class="hljs-string">'rb'</span>
      <span class="hljs-string">'rbw'</span>
      <span class="hljs-string">'rake'</span>
      <span class="hljs-string">'gemspec'</span>
    ]
    executables: [ <span class="hljs-string">'ruby'</span> ]
    names: [ <span class="hljs-string">'rakefile'</span> ]
    comment: <span class="hljs-string">'#'</span>
    multiLine: [
      <span class="hljs-regexp">/\=begin/</span>
      <span class="hljs-regexp">/\=end/</span>
    ]
  python:
    extensions: [ <span class="hljs-string">'py'</span> ]
    executables: [ <span class="hljs-string">'python'</span> ]
    comment: <span class="hljs-string">'#'</span>
  perl:
    extensions: [
      <span class="hljs-string">'pl'</span>
      <span class="hljs-string">'pm'</span>
    ]
    executables: [ <span class="hljs-string">'perl'</span> ]
    comment: <span class="hljs-string">'#'</span>
  c:
    extensions: [
      <span class="hljs-string">'c'</span>
      <span class="hljs-string">'h'</span>
    ]
    executables: [ <span class="hljs-string">'gcc'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  cpp:
    extensions: [
      <span class="hljs-string">'cc'</span>
      <span class="hljs-string">'cpp'</span>
    ]
    executables: [ <span class="hljs-string">'g++'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  vbnet:
    extensions: [
      <span class="hljs-string">'vb'</span>
      <span class="hljs-string">'vbs'</span>
      <span class="hljs-string">'bas'</span>
    ]
    comment: <span class="hljs-string">'\''</span>
  <span class="hljs-string">'aspx-vb'</span>:
    extensions: [
      <span class="hljs-string">'asp'</span>
      <span class="hljs-string">'aspx'</span>
      <span class="hljs-string">'asax'</span>
      <span class="hljs-string">'ascx'</span>
      <span class="hljs-string">'ashx'</span>
      <span class="hljs-string">'asmx'</span>
      <span class="hljs-string">'axd'</span>
    ]
    comment: <span class="hljs-string">'\''</span>
  csharp:
    extensions: [ <span class="hljs-string">'cs'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  <span class="hljs-string">'aspx-cs'</span>:
    extensions: [
      <span class="hljs-string">'aspx'</span>
      <span class="hljs-string">'asax'</span>
      <span class="hljs-string">'ascx'</span>
      <span class="hljs-string">'ashx'</span>
      <span class="hljs-string">'asmx'</span>
      <span class="hljs-string">'axd'</span>
    ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  java:
    extensions: [ <span class="hljs-string">'java'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  php:
    extensions: [
      <span class="hljs-string">'php'</span>
      <span class="hljs-string">'php3'</span>
      <span class="hljs-string">'php4'</span>
      <span class="hljs-string">'php5'</span>
    ]
    executables: [ <span class="hljs-string">'php'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  actionscript:
    extensions: [ <span class="hljs-string">'as'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
  sh:
    extensions: [
      <span class="hljs-string">'sh'</span>
      <span class="hljs-string">'kst'</span>
      <span class="hljs-string">'bash'</span>
    ]
    names: [
      <span class="hljs-string">'.bashrc'</span>
      <span class="hljs-string">'bashrc'</span>
    ]
    executables: [
      <span class="hljs-string">'bash'</span>
      <span class="hljs-string">'sh'</span>
      <span class="hljs-string">'zsh'</span>
    ]
    comment: <span class="hljs-string">'#'</span>
  yaml:
     extensions: [ <span class="hljs-string">'yaml'</span>, <span class="hljs-string">'yml'</span> ]
     comment: <span class="hljs-string">'#'</span>
  markdown:
    extensions: [
      <span class="hljs-string">'md'</span>
      <span class="hljs-string">'mkd'</span>
      <span class="hljs-string">'markdown'</span>
    ]
    type: <span class="hljs-string">'markdown'</span></pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>not supported by highlight.js</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">  sass:
    extensions: [ <span class="hljs-string">'sass'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
  scss:
    extensions: [ <span class="hljs-string">'scss'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  makefile:
    names: [ <span class="hljs-string">'makefile'</span> ]
    comment: <span class="hljs-string">'#'</span>
  apache:
    names: [
      <span class="hljs-string">'.htaccess'</span>
      <span class="hljs-string">'apache.conf'</span>
      <span class="hljs-string">'apache2.conf'</span>
    ]
    comment: <span class="hljs-string">'#'</span>
  jade:
    extensions: [ <span class="hljs-string">'jade'</span> ]
    comment: <span class="hljs-string">'//-?'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  groovy:
    extensions: [ <span class="hljs-string">'groovy'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    jsDoc: <span class="hljs-literal">true</span>
  gsp:
    extensions: [ <span class="hljs-string">'gsp'</span> ]
    multiLine: [
      <span class="hljs-regexp">/&lt;%--/</span>
      <span class="hljs-regexp">/--%&gt;/</span>
    ]
    highlightLanguage: <span class="hljs-string">'html'</span>
  stylus:
    extensions: [ <span class="hljs-string">'styl'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
  css:
    extensions: [ <span class="hljs-string">'css'</span> ]
    multiLine: [
      <span class="hljs-regexp">/\/\*/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
    commentStart: <span class="hljs-string">'/*'</span>
    commentEnd: <span class="hljs-string">'*/'</span>
  less:
    extensions: [ <span class="hljs-string">'less'</span> ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]
  html:
    extensions: [
      <span class="hljs-string">'html'</span>
      <span class="hljs-string">'htm'</span>
    ]
    multiLine: [
      <span class="hljs-regexp">/&lt;!--/</span>
      <span class="hljs-regexp">/--&gt;/</span>
    ]
    commentStart: <span class="hljs-string">'&lt;!--'</span>
    commentEnd: <span class="hljs-string">'--&gt;'</span>
  json:
    extensions: [ <span class="hljs-string">'json'</span> ]
    names: [
      <span class="hljs-string">'.eslintrc'</span>
      <span class="hljs-string">'.jshintrc'</span>
    ]
    comment: <span class="hljs-string">'//'</span>
    multiLine: [
      <span class="hljs-regexp">/\/\*\*?/</span>
      <span class="hljs-regexp">/\*\//</span>
    ]</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>also add the language name within the definition</p>

        </td>
        <td class="code highlight">
          <pre class="coffeescript">l.name = name <span class="hljs-keyword">for</span> name, l <span class="hljs-keyword">of</span> languages</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
